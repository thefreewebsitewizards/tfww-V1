<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Free Website Strategy Call</title>
    <link rel="preconnect" href="https://assets.calendly.com" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800;900&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Meta Pixel Code -->
    <script>
    !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
    n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}
    (window, document,'script','https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '3032047526979670'); fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=3032047526979670&ev=PageView&noscript=1"/></noscript>
    <!-- End Meta Pixel Code -->

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-QWWSYRKH49"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);} 
      gtag('js', new Date());
      gtag('config', 'G-QWWSYRKH49');
    </script>
    <style>
      body { margin: 0; background:#000000; color:#fff; font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, sans-serif; }
      .center { text-align: center; }
      .small { font-size: 12px; color: #9ea0a8; }
      .hidden { display: none; }
      .inline-widget { min-width: 100%; min-height: 720px; height: 800px; border-radius: 16px; overflow: hidden; }
      @media (min-width: 640px) { .inline-widget { height: 860px; } }
      .calendly-inline-widget { width: 100%; }
      .star { position: absolute; background: rgba(255,255,255,0.85); border-radius: 50%; pointer-events: none; animation-name: twinkle; }
    </style>
  </head>
  <body class="font-poppins bg-black text-gray-200 overflow-x-hidden">
    <!-- Floating Stars Background -->
    <div id="stars-container" class="fixed inset-0 pointer-events-none z-0"></div>
    <!-- Floating Particles Background -->
    <div id="particles-container" class="fixed inset-0 pointer-events-none z-0"></div>

    <!-- Booking Prompt Modal -->
    <div id="bookingPrompt" class="fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm hidden">
      <div class="w-full max-w-lg mx-4 bg-black border border-purple-500/40 rounded-2xl p-6 md:p-8 shadow-2xl">
        <h2 class="text-3xl md:text-4xl font-extrabold tracking-tight text-white text-center mb-2">Almost finished!</h2>
        <p class="text-base md:text-lg text-gray-200 text-center mb-6">To complete your application, Book a short Free Website Strategy Call</p>
        <div class="flex items-center justify-center">
          <button id="continueToBooking" class="px-5 py-3 rounded-lg bg-purple-600 hover:bg-purple-500 text-white font-semibold shadow-lg hover:shadow-xl transition">Continue to Booking</button>
        </div>
      </div>
    </div>

    <main class="relative z-10 max-w-6xl mx-auto px-6 py-12">
      <!-- Scheduler Section -->
      <section id="scheduler" class="bg-black magic-bg nebula-bg text-white rounded-2xl border border-purple-500/30 shadow-2xl p-6 md:p-10">
        <div class="center mb-10">
          <div class="mb-2">
            <span class="inline-block text-xs md:text-sm font-semibold tracking-wide uppercase text-purple-300 bg-purple-600/10 border border-purple-500/30 rounded-full px-3 py-1">Almost finished!</span>
          </div>
          <h1 class="text-3xl md:text-4xl font-extrabold tracking-tight mb-3">To complete your application, <span class="gradient-text">Book a Free Website Strategy Call</span></h1>
          <p class="p max-w-2xl mx-auto">In just 15 minutes, we’ll map your website plan, answer questions, and get timelines moving right away.</p>
        </div>

        <!-- Value bullets -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
          <div class="flex items-start gap-3 bg-black/40 border border-purple-500/20 rounded-lg p-4">
            <i class="fas fa-rocket text-purple-400 mt-1"></i>
            <div>
              <p class="text-white font-semibold">Quick Launch Plan</p>
              <p class="text-sm text-gray-300">Concrete next steps to get your free site live fast.</p>
            </div>
          </div>
          <div class="flex items-start gap-3 bg-black/40 border border-purple-500/20 rounded-lg p-4">
            <i class="fas fa-palette text-purple-400 mt-1"></i>
            <div>
              <p class="text-white font-semibold">Design Ideas</p>
              <p class="text-sm text-gray-300">Themes and layouts tailored for your business.</p>
            </div>
          </div>
          <div class="flex items-start gap-3 bg-black/40 border border-purple-500/20 rounded-lg p-4">
            <i class="fas fa-chart-line text-purple-400 mt-1"></i>
            <div>
              <p class="text-white font-semibold">Growth Checklist</p>
              <p class="text-sm text-gray-300">Simple actions to start attracting and converting visitors.</p>
            </div>
          </div>
        </div>

        <!-- Calendly embed -->
        <div class="relative rounded-2xl overflow-hidden border border-purple-500/40 shadow-2xl">
          <div id="calendlyInline" class="calendly-inline-widget inline-widget"
               data-url="https://calendly.com/dylan-thefreewebsitewizards/freewebsitestrategycall?hide_event_type_details=1&background_color=000000&text_color=ffffff&primary_color=9333ea"></div>
        </div>

        <p class="small center mt-6">If you don’t see the calendar, please check your connection.</p>
      </section>
    </main>

    <!-- Footer simplified (optional) -->
    <footer class="py-12 text-white bg-black/80 border-t border-purple-800">
      <div class="container mx-auto px-6">
        <div class="flex flex-col md:flex-row justify-between items-center">
          <p class="text-gray-300">© 2025 THE FREE WEBSITE WIZARDS — All rights reserved.</p>
          <div class="flex items-center space-x-6">
            <a href="privacy-policy.html" class="text-gray-300 hover:text-white">Privacy Policy</a>
            <a href="terms-of-service.html" class="text-gray-300 hover:text-white">Terms and Conditions</a>
          </div>
        </div>
      </div>
    </footer>

    <script>
      // Fire a page view event if you use dataLayer
      try {
        window.dataLayer = window.dataLayer || [];
        window.dataLayer.push({ event: 'StrategyCallLoaded' });
      } catch (_) {}

      // Load Calendly widget script
      (function ensureCalendly() {
        if (!document.getElementById('calendly-widget-js')) {
          const s = document.createElement('script');
          s.id = 'calendly-widget-js';
          s.src = 'https://assets.calendly.com/assets/external/widget.js';
          s.async = true;
          document.head.appendChild(s);
        }
      })();

      // Read lead details from query params to preserve across redirect
      const params = new URLSearchParams(window.location.search);
      const name = params.get('name') || '';
      const email = params.get('email') || '';
      const phone = params.get('phone') || '';

      // Listen for Calendly booking event: track and redirect to thank-you
      window.addEventListener('message', (e) => {
        try {
          if (!e || !e.data || !e.data.event) return;
          if (String(e.data.event) === 'calendly.event_scheduled') {
            try {
              window.dataLayer.push({ event: 'meeting_scheduled' });
              window.dataLayer.push({ event: 'MeetingScheduled' });
              if (window.fbq) { try { fbq('track', 'Schedule', { content_name: 'Free Website Strategy Call' }); } catch (_) {} }
              if (typeof gtag === 'function') { try { gtag('event', 'meeting_scheduled', { event_category: 'Calendly', event_label: 'Free Website Strategy Call' }); } catch (_) {} }
            } catch (_) {}

            // Redirect to final thank-you page, preserving lead details
            const next = new URLSearchParams();
            if (name) next.set('name', name);
            if (email) next.set('email', email);
            if (phone) next.set('phone', phone);
            window.location.href = `thank-you.html?${next.toString()}`;
          }
        } catch (err) {
          console.warn('Calendly listener error:', err);
        }
      });

      // Background visuals
      function createStars() {
        const starsContainer = document.getElementById('stars-container');
        const numberOfStars = 50;
        for (let i = 0; i < numberOfStars; i++) {
          const star = document.createElement('div');
          star.className = 'star';
          star.style.left = Math.random() * 100 + '%';
          star.style.top = Math.random() * 100 + '%';
          star.style.width = Math.random() * 3 + 1 + 'px';
          star.style.height = star.style.width;
          star.style.animationDelay = Math.random() * 2 + 's';
          star.style.animationDuration = (Math.random() * 3 + 2) + 's';
          starsContainer.appendChild(star);
        }
      }

      function createParticles() {
        const particlesContainer = document.getElementById('particles-container');
        setInterval(() => {
          const particle = document.createElement('div');
          particle.className = 'particle';
          particle.style.left = Math.random() * 100 + '%';
          particle.style.width = Math.random() * 4 + 2 + 'px';
          particle.style.height = particle.style.width;
          particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
          particle.style.opacity = Math.random() * 0.5 + 0.3;
          particlesContainer.appendChild(particle);
          setTimeout(() => {
            if (particle.parentNode) particle.parentNode.removeChild(particle);
          }, 20000);
        }, 350);
      }

      document.addEventListener('DOMContentLoaded', function() {
        createStars();
        createParticles();
        // Show booking prompt modal on load and wire actions
        const prompt = document.getElementById('bookingPrompt');
        const continueBtn = document.getElementById('continueToBooking');
        if (prompt) {
          prompt.classList.remove('hidden');
          setTimeout(() => { try { continueBtn && continueBtn.focus(); } catch(_){} }, 100);
        }
        const scrollToScheduler = () => {
          try { prompt && prompt.classList.add('hidden'); } catch(_){ }
          const scheduler = document.getElementById('scheduler');
          if (scheduler && typeof scheduler.scrollIntoView === 'function') {
            scheduler.scrollIntoView({ behavior: 'smooth', block: 'start' });
          }
        };
        continueBtn && continueBtn.addEventListener('click', scrollToScheduler);
      });
    </script>
  </body>
  </html>